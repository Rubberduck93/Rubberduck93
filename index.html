<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Assignment 1</title>
		<script src="https://d3js.org/d3.v4.min.js"></script>
		<style type="text/css">
			/* No style rules here yet */
			.para {
				color: black;
				font-size: 14px;
				font-family: sans-serif;
		}

		 .markettext {
			 color: black;
			 font-size: 12px;
			 font-family: verdana;
		 }

		</style>
	</head>
	<body>
		<h1> Page Title - Think of something funny </h1>
		<h2> Part 1: DAOST Chapter 2 Questions </h2>
		<ul>
			<li class="para">  <em> Explain in your own words the point of the jitter plot </em>
			<br/>The point of <strong>Jitter Plots</strong> is adding a small random number to the data, to avoid the data from clustering.
   	  <br/>Instead of giving each data the same X coordinate, a small random number is adding, which creates a more clear view of the data.
			</li>
			<li class="para"> <em> Explain in your own words the point of figure 2-3. </em>
			<br/> <strong>Figure 2-3</strong> shows that the position and width of the bins are very important.
			<br/> The two histograms consists of the same data set, but looks completely different.
			</li>
			<li class="para"> <em> The author of DAOST (Philipp Janert) likes KDEs ... </em>

			</li>
			<li class="para"> <em> I've discussed some strengths of the CDF - there are also weaknesses ... </em>

			</li>
			<li class="para"> <em> What is a Quantile plot? What is it good for. </em>
			<br/> Abselutely nothing ...
			</li>
			<li class="para"> <em> The author of DAOST (Philipp Janert) likes KDEs ... </em>

			</li>

	  </ul>
		<h2> Part 2: DAOST Chapter 3 Questions </h2>
		<h2> Part 3: Viz 1 </h2>
		<h3> <strong> This is Quantifiably the Best Month to go to the Farmers Market </strong> </h3>
		<p class="markettext"> As part of a homework assignment, I ask my students at Pratt to go out and chart something of interest to them, and
			Katherine Savarese came back with a simple chart about farmers markets that I loved- it inspired this post.
			<br/> You probably know that farmers markets are a staple across all five boroughs of New York City, but September happens to be a very special month. Why is that?  Well, it turns out September is the month with the most unique types of fresh produce- forty three to be exact.
			<br/> To show the current offerings, we charted how many types of fruits and vegetables are available by month, and showed if they were fresh or from storage.
		</p>
		<p> This is a reproduction of http://iquantny.tumblr.com/post/129373499164/this-is-quantifiably-the-best-month-to-go-to-the </p>
		<p id="FF">Fresh Fruit</p>
		<p id="FV">Fresh Vegetable</p>
		<p id="SF">Storage Fruit</p>
		<p id="SV">Storage Vegetable</p>
		<p id="All">Everything</p>
		<script type="text/javascript">

			//Width and height
		      var w = 800;
		      var h = 300;
		      var barPadding = 1;
		      var padding = 40;
		      var JanMonth = 0;
					var FebMonth = 0;
					var MarMonth = 0;
					var AprMonth = 0;
					var MayMonth = 0;
					var JunMonth = 0;
					var JulMonth = 0;
					var AugMonth = 0;
					var SepMonth = 0;
					var OctMonth = 0;
					var NovMonth = 0;
					var DecMonth = 0;

			var dataset, xScale, yScale;  //Empty, for now
		      //For converting strings to Dates
		      //var parseTime = d3.timeParse("%m/%d/%y");
			var parseTime = d3.timeParse("%b");
		      //For converting Dates to strings
		      //var formatTime = d3.timeFormat("%B %e %Y %Z");
			//var formatTime = d3.time.format("%b");



		      //Function for converting CSV values from strings to Dates and numbers
		      var rowConverter = function(d) {
			return {
			  Index: parseInt(d.Index),
			 //Month: parseTime(d.Month),
			 // Month: formatTime(d.Month),
			  Month: d.Month,
			  Count: parseInt(d.Count)
			};
		      }

		      d3.csv("green_markets.csv", rowConverter, function(data) {


			      //Copy data into global dataset
				dataset = data;
			      // xscale = d3.scaleBand


			      var xScale = d3.scaleBand().domain(['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']).
			      range([0,w]).paddingInner(0.05);

				// xAxis
				var xAxis = d3.axisBottom(xScale)
				.ticks(12);
			     //Create SVG element
					var svg = d3.select("body")
					      .append("svg")
					      .attr("width", w)
					      .attr("height", h);


			      // Bars
				svg.selectAll("rect")
				  .data(data)
				  .enter()
				  .append("rect")
				  .attr("fill", function(d) {
				  if (d.Index == 0) {
						return "rgb(200,0, 0)";
					}
					if (d.Index == 1) {
						return "rgb(100,0, 0)";
					}
					if (d.Index == 2) {
						return "rgb(0,200, 0)";
					}
					if (d.Index == 3) {
						return "rgb(0,100, 0)";
					}
				  })
				  .attr("x", function(d, i) {
						return xScale(d.Month) + 24;
				  })
				  .attr("y", function(d) {
					if (d.Month == "Jan") {
						//JanMonth
						JanMonth += d.Count;
						return h - padding - JanMonth * 4;
					}
					if (d.Month == "Feb") {
						FebMonth += d.Count;
						return h - padding - FebMonth * 4;
					}
					if (d.Month == "Mar") {
						MarMonth += d.Count;
						return h - padding - MarMonth * 4;
					}
					if (d.Month == "Apr") {
						AprMonth += d.Count;
						return h - padding - AprMonth * 4;
					}
					if (d.Month == "May") {
						MayMonth += d.Count;
						return h - padding - MayMonth * 4;
					}
					if (d.Month == "Jun") {
						JunMonth += d.Count;
						return h - padding - JunMonth * 4;
					}
					if (d.Month == "Jul") {
						JulMonth += d.Count;
						return h - padding - JulMonth * 4;
					}
					if (d.Month == "Aug") {
						AugMonth += d.Count;
						return h - padding - AugMonth * 4;
					}
					if (d.Month == "Sep") {
						SepMonth += d.Count;
						return h - padding - SepMonth * 4;
					}
					if (d.Month == "Oct") {
						OctMonth += d.Count;
						return h - padding - OctMonth * 4;
					}
					if (d.Month == "Nov") {
						NovMonth += d.Count;
						return h - padding - NovMonth * 4;
					}
					if (d.Month == "Dec") {
						DecMonth += d.Count;
						return h - padding - DecMonth * 4;
					}
				      //return h - d.Index * 4; //Height minus data value
				  })
				  .attr("width", w / data.length - barPadding)
				  .attr("height", function(d) {
				        return d.Count * 4;
				  });




			      //Create X axis
			    svg.append("g") // Group element
			    .attr("class", "x axis") //Assign "axis" class
			    .attr("transform", "translate(0," + (h-padding) + ")") // translate(x,y)
			    .call(xAxis);


					d3.selectAll("p")
					.on("click", function() {

						//var bars = svg.selectAll("rect").data(dataset);

							var paragraphID = d3.select(this).attr("id");
								if (paragraphID == "FF") {
									alert("Fresh Fruit");
									// Bars
									svg.selectAll("rect")
									.data(dataset)
									.attr("fill", function(d) {
									if (d.Index == 0) {
										return "rgb(200,0, 0)";
									}
									})
									.attr("x", function(d, i) {
									return xScale(d.Month) + 24;
									})
									.attr("y", function(d) {
										return h - padding - d.Count*4;
									})
									.attr("width", w / data.length - barPadding)
									.attr("height", function(d) {
										if (d.Index == 0) {
											return d.Count * 4;
										}
									});

								}

								if (paragraphID == "FV") {
									//alert("Fresh Vegetable");
									// Bars
									svg.selectAll("rect")
									.data(dataset)
									.transition()
									.duration(1000)
									.attr("fill", function(d) {
									if (d.Index == 1) {
										return "rgb(100,0, 0)";
									}
									})
									.attr("x", function(d, i) {
									return xScale(d.Month) + 24;
									})
									.attr("y", function(d) {
										return h - padding - d.Count*4;
									})
									.attr("width", w / data.length - barPadding)
									.attr("height", function(d) {
										if (d.Index == 1) {
											return d.Count * 4;
										}
									});
								}


								if (paragraphID == "SF") {
									//alert("Storage Fruit");
									// Bars
									svg.selectAll("rect")
									.data(dataset)
									.transition()
									.duration(1000)
									.attr("fill", function(d) {
									if (d.Index == 2) {
										return "rgb(0,200, 0)";
									}
									})
									.attr("x", function(d, i) {
									return xScale(d.Month) + 24;
									})
									.attr("y", function(d) {
										return h - padding - d.Count*4;
									})
									.attr("width", w / data.length - barPadding)
									.attr("height", function(d) {
										if (d.Index == 2) {
											return d.Count * 4;
										}
									});
								}

								if (paragraphID == "SV") {
									//alert("Storage Fruit");
									// Bars
									svg.selectAll("rect")
									.data(dataset)
									.transition()
									.duration(1000)
									.attr("fill", function(d) {
									if (d.Index == 3) {
										return "rgb(0,100, 0)";
									}
									})
									.attr("x", function(d, i) {
									return xScale(d.Month) + 24;
									})
									.attr("y", function(d) {
										return h - padding - d.Count*4;
									})
									.attr("width", w / data.length - barPadding)
									.attr("height", function(d) {
										if (d.Index == 3) {
											return d.Count * 4;
										}
									});
								}

								if (paragraphID == "All") {
									//alert("Everything");

									var JanMonth = 0;
									var FebMonth = 0;
									var MarMonth = 0;
									var AprMonth = 0;
									var MayMonth = 0;
									var JunMonth = 0;
									var JulMonth = 0;
									var AugMonth = 0;
									var SepMonth = 0;
									var OctMonth = 0;
									var NovMonth = 0;
									var DecMonth = 0;

									// Bars
							svg.selectAll("rect")
								.data(dataset)
								.transition()
								.duration(1000)
								.attr("fill", function(d) {
								if (d.Index == 0) {
									return "rgb(200,0, 0)";
								}
								if (d.Index == 1) {
									return "rgb(100,0, 0)";
								}
								if (d.Index == 2) {
									return "rgb(0,200, 0)";
								}
								if (d.Index == 3) {
									return "rgb(0,100, 0)";
								}
								})
								.attr("x", function(d, i) {
									return xScale(d.Month) + 24;
								})
								.attr("y", function(d) {
								if (d.Month == "Jan") {
									//JanMonth
									JanMonth += d.Count;
									return h - padding - JanMonth * 4;
								}
								if (d.Month == "Feb") {
									FebMonth += d.Count;
									return h - padding - FebMonth * 4;
								}
								if (d.Month == "Mar") {
									MarMonth += d.Count;
									return h - padding - MarMonth * 4;
								}
								if (d.Month == "Apr") {
									AprMonth += d.Count;
									return h - padding - AprMonth * 4;
								}
								if (d.Month == "May") {
									MayMonth += d.Count;
									return h - padding - MayMonth * 4;
								}
								if (d.Month == "Jun") {
									JunMonth += d.Count;
									return h - padding - JunMonth * 4;
								}
								if (d.Month == "Jul") {
									JulMonth += d.Count;
									return h - padding - JulMonth * 4;
								}
								if (d.Month == "Aug") {
									AugMonth += d.Count;
									return h - padding - AugMonth * 4;
								}
								if (d.Month == "Sep") {
									SepMonth += d.Count;
									return h - padding - SepMonth * 4;
								}
								if (d.Month == "Oct") {
									OctMonth += d.Count;
									return h - padding - OctMonth * 4;
								}
								if (d.Month == "Nov") {
									NovMonth += d.Count;
									return h - padding - NovMonth * 4;
								}
								if (d.Month == "Dec") {
									DecMonth += d.Count;
									return h - padding - DecMonth * 4;
								}
										//return h - d.Index * 4; //Height minus data value
								})
								.attr("width", w / data.length - barPadding)
								.attr("height", function(d) {
											return d.Count * 4;
								});
								}
















						});

					});



/*
// Bar Exit
bars.transition().duration(500).remove();


// Bars
bars.enter()
.append("rect")
.attr("fill", function(d) {
if (d.Index == 1) {
	return "rgb(100,0, 0)";
}
})
.attr("x", function(d, i) {
return xScale(d.Month) + 24;
})
.attr("y", function(d) {
	return h - padding - d.Count*4;
})
.attr("width", w / data.length - barPadding)
.attr("height", function(d) {
	if (d.Index == 1) {
		return d.Count * 4;
	}
});
*/









		</script>
		<p> If you miss the month of September, you might be behind the fruit curve, but there are plenty more months of vegetables left.
			The chart shows that fresh vegetables are available 9 out of 12 months, but fruit is only available 5 out of 12.
			Now if only we could quantify how delicious the produce is… </p>
		<h2> Part 4: Viz 2 </h2>
	</body>
</html>
